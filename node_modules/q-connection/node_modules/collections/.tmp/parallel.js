
var WeakMap = require("collections/weak-map");

module.exports = Parallel;
function Parallel(root) {
    var parallel = new WeakMap();
    root = root || null;

    function get(object) {
        if (!parallel.has(object)) {
            parallel.set(object, Object.create(get(Object.getPrototypeOf(object))));
        }
        return parallel.get(object);
    }

    return {get: get}
}

