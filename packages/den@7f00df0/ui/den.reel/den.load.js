montageDefine("7f00df0","ui/den.reel/den",{dependencies:["montage/ui/component"],factory:function(e,t,i){var r=e("montage/ui/component").Component;t.Den=r.specialize({_icon:{value:null},_needsUpdateIcon:{value:!1},icon:{get:function(){return this._icon},set:function(e){switch(e){case"am":this._icon="ui/den.reel/day.png";break;case"pm":this._icon="ui/den.reel/night.png";break;default:this._icon=null}this._needsUpdateIcon=!0,this.needsDraw=!0}},_desiredTemperature:{value:72.5},desiredTemperature:{get:function(){return this._desiredTemperature},set:function(e){this._desiredTemperature=e,this.needsDraw=!0}},_ambientTemperature:{value:72.5},ambientTemperature:{get:function(){return this._ambientTemperature},set:function(e){this._ambientTemperature=e,this.needsDraw=!0}},temperatureDelta:{value:0},_temperatureOffset:{value:51},_previousTimestamp:{value:null},enterDocument:{value:function(e){e&&(this.activationArea.addEventListener("touchstart",this,!1),this.activationArea.addEventListener("mousedown",this,!1),"webkitTransform"in this.element.style?this._transform="webkitTransform":"MozTransform"in this.element.style?this._transform="MozTransform":"msTransform"in this.element.style?this._transform="msTransform":this._transform="transform")}},handleTouchstart:{value:function(){var e=this.element.getBoundingClientRect(),t={pageX:.5*(e.left+e.right),pageY:.55*e.top+.45*e.bottom};this._rotateComposer.center=t,this.activationArea.removeEventListener("touchstart",this,!1)}},handleMousedown:{value:function(){var e=this.element.getBoundingClientRect(),t={pageX:.5*(e.left+e.right),pageY:.55*e.top+.45*e.bottom};this._rotateComposer.center=t,this.activationArea.removeEventListener("mousedown",this,!1)}},willDraw:{value:function(){var e=this.element.getBoundingClientRect(),t={pageX:.5*(e.left+e.right),pageY:.55*e.top+.45*e.bottom};this._rotateComposer.center=t}},_isRotating:{value:!1},handleRotate:{value:function(e){this.desiredTemperature+=e.deltaRotation/6,this.desiredTemperature<51&&(this.desiredTemperature=51),this.desiredTemperature>93&&(this.desiredTemperature=93),this._isRotating=!0,this.needsDraw=!0}},handleRotateEnd:{value:function(e){this.desiredTemperature=Math.floor(this.desiredTemperature)+.5,this._isRotating=!1,this.needsDraw=!0}},heatingRate:{value:1},coolingRate:{value:1},handlePress:{value:function(){console.log("press!")}},draw:{value:function(e){var t,i,r=this.ambientTemperature-this._temperatureOffset|0,s=this.desiredTemperature-this._temperatureOffset|0;this.temperatureDelta=(this.desiredTemperature-this.ambientTemperature)/42,this.rightDigit.style[this._transform]="translate3d("+-50*((0|this.desiredTemperature)%10)+"px, 0, 0)",this.leftDigit.style[this._transform]="translate3d("+-50*(this.desiredTemperature/10|0)+"px, 0, 0)",null===this._previousTimestamp&&(this._previousTimestamp=e),i=e-this._previousTimestamp,this._previousTimestamp=e,this.whiteBar.style[this._transform]="rotate3d(0, 0, 1, "+(6*s-126)+"deg)",this.leftRedBar.style.opacity=0,this.rightRedBar.style.opacity=0,this.leftBlueBar.style.opacity=0,this.rightBlueBar.style.opacity=0,this.redFadingBar.style.opacity=0,this.blueFadingBar.style.opacity=0,this.blackBar.style.opacity=0,r<s?(t=s-r-1,t<=30?(this.leftRedBar.style.opacity=1,this.blackBar.style.opacity=1,this.leftRedBar.style[this._transform]="rotate3d(0, 0, 1, "+(6*(1+r)-39)+"deg)",this.blackBar.style[this._transform]="rotate3d(0, 0, 1, "+(6*(1+r+t)-39)+"deg)"):(this.leftRedBar.style.opacity=1,this.rightRedBar.style.opacity=1,this.leftRedBar.style[this._transform]="rotate3d(0, 0, 1, "+(6*(1+r)-39)+"deg)",this.rightRedBar.style[this._transform]="rotate3d(0, 0, 1, "+(6*(1+r-(30-t))-39)+"deg)"),this.redFadingBar.style.opacity=1-(this.ambientTemperature-this._temperatureOffset-r),this.redFadingBar.style[this._transform]="rotate3d(0, 0, 1, "+(6*r-126)+"deg)"):r>s&&(t=r-s-1,t<=30?(this.leftBlueBar.style.opacity=1,this.blackBar.style.opacity=1,this.leftBlueBar.style[this._transform]="rotate3d(0, 0, 1, "+(6*(1+s)-39)+"deg)",this.blackBar.style[this._transform]="rotate3d(0, 0, 1, "+(6*(1+s+t)-39)+"deg)"):(this.leftBlueBar.style.opacity=1,this.rightBlueBar.style.opacity=1,this.leftBlueBar.style[this._transform]="rotate3d(0, 0, 1, "+(6*(1+s)-39)+"deg)",this.rightBlueBar.style[this._transform]="rotate3d(0, 0, 1, "+(6*(1+s-(30-t))-39)+"deg)"),this.blueFadingBar.style.opacity=this.ambientTemperature-this._temperatureOffset-r,this.blueFadingBar.style[this._transform]="rotate3d(0, 0, 1, "+(6*r-126)+"deg)"),this._isRotating||(this.ambientTemperature<this.desiredTemperature?(this.ambientTemperature+=.001*i*this.heatingRate,this.ambientTemperature>this.desiredTemperature&&(this.ambientTemperature=this.desiredTemperature),this.needsDraw=!0):this.desiredTemperature<this.ambientTemperature&&(this.ambientTemperature-=.001*i*this.coolingRate,this.ambientTemperature<this.desiredTemperature&&(this.ambientTemperature=this.desiredTemperature),this.needsDraw=!0)),this._needsUpdateIcon&&(this.iconElement.style.backgroundImage="url("+this._icon+")",this._needsUpdateIcon=!1)}}})}});