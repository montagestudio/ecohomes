var ResourceLoader=require("runtime/resource-loader").ResourceLoader,MeshResourceLoader=require("runtime/mesh-resource-loader").MeshResourceLoader;exports.SceneResourceLoader=Object.create(ResourceLoader,{_scene:{value:null,writable:!0},scene:{get:function(){return this._scene},set:function(e){this._scene=e}},meshesDidLoad:{value:function(){this.delegate&&this.delegate.sceneResourcesDidPrepare(this.scene)}},loadScene:{value:function(){var e=this;if(this.scene){var s=this.scene.rootNode,r={},t=[];s.apply(function(e,s,n){return e.meshes&&e.meshes.length&&e.meshes.forEach(function(e){null==r[e.id]&&(t.push(e),r[e.id]=e)},this),null},!0,null);var n=Object.create(MeshResourceLoader).init(t,e.webGLRenderer,this);n.loadMeshes()}}},init:{value:function(e,s,r){return r&&(this.delegate=r),this.webGLRenderer=s,this.scene=e,s.resourceManager.observers.push(this),this}}});