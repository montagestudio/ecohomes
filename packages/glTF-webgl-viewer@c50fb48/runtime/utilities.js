require("runtime/dependencies/gl-matrix"),exports.Utilities=Object.create(Object.prototype,{vec3Min:{value:function(e,t){t[0]<e[0]&&(e[0]=t[0]),t[1]<e[1]&&(e[1]=t[1]),t[2]<e[2]&&(e[2]=t[2])}},vec3Max:{value:function(e,t){t[0]>e[0]&&(e[0]=t[0]),t[1]>e[1]&&(e[1]=t[1]),t[2]>e[2]&&(e[2]=t[2])}},mergeBBox:{value:function(e,t){var r=e[0],i=e[1],a=t[0],c=t[1],n=[r[0]<a[0]?r[0]:a[0],r[1]<a[1]?r[1]:a[1],r[2]<a[2]?r[2]:a[2]],v=[i[0]>c[0]?i[0]:c[0],i[1]>c[1]?i[1]:c[1],i[2]>c[2]?i[2]:c[2]];return[n,v]}},computeBBOXFromVec3Array:{value:function(e){if(0===e.length)return null;for(var t=[e[0][0],e[0][1],e[0][2]],r=[e[0][0],e[0][1],e[0][2]],i=0;i<8;i++)e[i][0]<t[0]&&(t[0]=e[i][0]),e[i][1]<t[1]&&(t[1]=e[i][1]),e[i][2]<t[2]&&(t[2]=e[i][2]),e[i][0]>r[0]&&(r[0]=e[i][0]),e[i][1]>r[1]&&(r[1]=e[i][1]),e[i][2]>r[2]&&(r[2]=e[i][2]);return[t,r]}},transformBBox:{value:function(e,t){var r=e[0],i=e[1],a=0,c=1,n=2,v=mat4.multiplyVec3(t,vec3.createFrom(r[a],r[c],r[n])),o=mat4.multiplyVec3(t,vec3.createFrom(i[a],r[c],r[n])),l=mat4.multiplyVec3(t,vec3.createFrom(r[a],i[c],r[n])),m=mat4.multiplyVec3(t,vec3.createFrom(i[a],i[c],r[n])),u=mat4.multiplyVec3(t,vec3.createFrom(r[a],r[c],i[n])),s=mat4.multiplyVec3(t,vec3.createFrom(i[a],r[c],i[n])),f=mat4.multiplyVec3(t,vec3.createFrom(r[a],i[c],i[n])),d=mat4.multiplyVec3(t,vec3.createFrom(i[a],i[c],i[n]));return this.computeBBOXFromVec3Array([v,o,l,m,u,s,f,d])}},rayIntersectsMesh:{value:function(e,t,r,i,a){var c=t.verticesBuffer;if(null===c)return!1;for(var n=!1,v=t.primitives.length,o=(vec3.create(),vec3.create(),vec3.create(),0);o<v;o++){var l=t.primitives[o];if(a){var m=a.materials;if(m&&m.indexOf(l.material.name)==-1)continue}if(!(null!==l.material.inputs.transparency&&"undefined"!=typeof l.material.inputs.transparency&&l.material.inputs.transparency<1)){var u=l.boundingBox;if(this.intersectsBBOX(u,e))return!0}}return n}},intersectsBBOX:{value:function(e,t){var r,i,a,c,n,v,o=0,l=1,m=2,u=t[1],s=t[0],f=e[0],d=e[1];return u[o]>=0?(r=(f[o]-s[o])/u[o],i=(d[o]-s[o])/u[o]):(r=(d[o]-s[o])/u[o],i=(f[o]-s[o])/u[o]),u[l]>=0?(a=(f[l]-s[l])/u[l],c=(d[l]-s[l])/u[l]):(a=(d[l]-s[l])/u[l],c=(f[l]-s[l])/u[l]),!(r>c||a>i)&&(a>r&&(r=a),c<i&&(i=c),u[m]>=0?(n=(f[m]-s[m])/u[m],v=(d[m]-s[m])/u[m]):(n=(d[m]-s[m])/u[m],v=(f[m]-s[m])/u[m]),!(r>v||n>i)&&(n>r&&(r=n),v<i&&(i=v),!0))}},inverpolateAxisAngle:{value:function(e,t,r,a){var c=0,n=1,v=2,o=v,l=vec4.createFrom(e[0],e[1],e[2],e[3]),m=vec4.createFrom(t[0],t[1],t[2],t[3]);if(o==c){vec3.normalize(l),vec3.normalize(m);var u=vec3.create();vec3.cross(l,m,u);var s=(Math.sqrt(vec3.dot(l,l)),Math.sqrt(vec3.dot(m,m)),Math.acos(vec3.dot(l,m))),f=mat4.identity();mat4.rotate(f,s*r,u),mat4.multiplyVec3(f,l,u),vec3.normalize(u);var d=l[3]+(m[3]-l[3])*r;quat4.fromAngleAxis(d,u,a)}else if(o==n){for(i=0;i<a.length;i++){var h=l[i],x=m[i];m[i]=h+(x-h)*r}quat4.fromAngleAxis(m[3],m,a)}else o==v&&quat4.slerp(e,t,r,a)}},interpolateVec:{value:function(e,t,r,a){for(i=0;i<a.length;i++){var c=e[i],n=t[i];a[i]=c+(n-c)*r}}},idx:{value:function(e,t){return 4*e+t}},decomposeMat4:{value:function(e,t,r,i){var a,c,n=mat4.create(),v=mat4.create(),o=(mat4.create(),mat4.create(),[vec3.create(),vec3.create(),vec3.create()]);mat4.set(e,n);var l,m;for(a=0;a<4;a++)for(c=0;c<4;c++)l=this.idx(a,c),m=this.idx(3,3),n[l]/=n[m];for(mat4.set(n,v),a=0;a<3;a++)l=this.idx(a,3),v[l]=0;for(l=this.idx(3,3),v[l]=1,0==n[this.idx(0,3)]&&0==n[this.idx(1,3)]&&0==n[this.idx(2,3)]||(n[this.idx(0,3)]=0,n[this.idx(1,3)]=0,n[this.idx(2,3)]=0,n[this.idx(3,3)]=1),t[0]=n[this.idx(3,0)],n[this.idx(3,0)]=0,t[1]=n[this.idx(3,1)],n[this.idx(3,1)]=0,t[2]=n[this.idx(3,2)],n[this.idx(3,2)]=0,a=0;a<3;a++)o[a][0]=n[this.idx(a,0)],o[a][1]=n[this.idx(a,1)],o[a][2]=n[this.idx(a,2)];i[0]=vec3.length(o[0]),vec3.normalize(o[0]),i[1]=vec3.length(o[1]),vec3.normalize(o[1]),i[2]=vec3.length(o[2]),vec3.normalize(o[2]);var u=vec3.create();if(vec3.cross(o[1],o[2],u),vec3.dot(o[0],u)<0)for(a=0;a<3;a++)i[a]*=-1,o[a][0]*=-1,o[a][1]*=-1,o[a][2]*=-1;var s=mat3.create();s[0]=o[0][0],s[1]=o[1][0],s[2]=o[2][0],s[3]=o[0][1],s[4]=o[1][1],s[5]=o[2][1],s[6]=o[0][2],s[7]=o[1][2],s[8]=o[2][2],mat3.transpose(s),quat4.fromRotationMatrix(s,r),quat4.normalize(r)}},easeOut:{value:function(e){var t=e,r=0,i=1;return t--,y=i*(t*t*t+1)+r-1,y=-y,y=1-y,y}}});