var Component=require("montage/ui/component").Component,Map=require("montage/collections/map");exports.GlView=Component.specialize({temperatureDelta:{value:0},isHeating:{value:!1},heatingColor:{value:null},isCooling:{value:!1},coolingColor:{value:null},_neutralFloorColor:{value:null},floorColor:{value:null},_panelKeyViewpointMap:{value:null},_rideViewpoints:{value:null},constructor:{value:function(){this["super"](),this._neutralFloorColor=[0,0,0,0],this.defineBinding("isHeating",{"<-":"temperatureDelta > 0"}),this.defineBinding("isCooling",{"<-":"temperatureDelta < 0"}),this.addPathChangeListener("temperatureDelta",this,"handleTemperatureDeltaChange")}},enterDocument:{value:function(e){e&&this.canDrawGate.setField("resourcesLoaded",!1)}},handleResourcesDidLoad:{value:function(e){this.canDrawGate.setField("resourcesLoaded",!0),this.needsDraw=!0}},handleTemperatureDeltaChange:{value:function(){this.temperatureDelta>0?(this.heatingColor=[1,0,0,.7*this.temperatureDelta],this.coolingColor=this._neutralFloorColor,this.floorColor=this.heatingColor):(this.coolingColor=[0,0,1,-.7*this.temperatureDelta],this.heatingColor=this._neutralFloorColor,this.floorColor=this.coolingColor)}},currentPanel:{value:null},configuration:{value:null},templateDidLoad:{value:function(){var e=this.templateObjects;this._panelKeyViewpointMap=Map.from({staircase:e.staircaseViewpoint,kitchen:e.kitchenViewpoint,counters:e.counterViewpoint,window:e.windowViewpoint,laundry:e.laundryViewpoint});var t=this._rideViewpoints=new Map;t.set(this.templateObjects.rideViewpoint.id,this.templateObjects.rideViewpoint),t.set(this.templateObjects.rideViewpoint2.id,this.templateObjects.rideViewpoint2),t.set(this.templateObjects.rideViewpoint3.id,this.templateObjects.rideViewpoint3),this.addPathChangeListener("configuration.configurationMap.get('staircase').optionMap.get('material')._selectedOption",this,"handleStaircaseMaterialChange"),this.addPathChangeListener("configuration.configurationMap.get('window').optionMap.get('coating').value",this,"handleWindowCoatingChange"),this.addPathChangeListener("configuration.configurationMap.get('kitchen').optionMap.get('appliances')._selectedOption",this,"handleKitchenAppliancesChange"),this.addPathChangeListener("configuration.configurationMap.get('counters').optionMap.get('material')._selectedOption",this,"handleCountertopMaterialChange"),this.addPathChangeListener("configuration.configurationMap.get('laundry').optionMap.get('washer').chosen",this,"handleWasherChange"),this.addPathChangeListener("configuration.configurationMap.get('laundry').optionMap.get('dryer').chosen",this,"handleDryerChange"),this.addPathChangeListener("currentPanel",this,"handleCurrentPanelChange")}},handleWasherChange:{value:function(e){var t=this.templateObjects.washerNode;t.hidden=!e}},handleDryerChange:{value:function(e){var t=this.templateObjects.dryerNode;t.hidden=!e}},handleStaircaseMaterialChange:{value:function(e){var t=this.templateObjects.staircaseMaterial,a="wood-stairs.jpg";if(e)switch(e.name){case"FSC Pine":a="wood-stairs.jpg";break;case"Dark Ash":a="dark-stairs.jpg";break;case"Dark Walnut":a="walnut-stairs.jpg";break;case"Deep Cherry":a="bold-stairs.jpg";break;default:a=""}t.image=a}},handleKitchenAppliancesChange:{value:function(e){var t=this.templateObjects.guterslohAppliancesNode,a=this.templateObjects.norseAppliancesNode,i=this.templateObjects.vortexAppliancesNode,n=!1,o=!1,s=!1;if(e)switch(e.name){case"GÃ¼tersloh":n=!0;break;case"Norse":o=!0;break;case"Vortex":s=!0}t.hidden=!n,a.hidden=!o,i.hidden=!s}},handleCountertopMaterialChange:{value:function(e){var t=this.templateObjects.countertopMaterial,a=this.templateObjects.cuisineMaterial,i="bar_dessus_paper.jpg",n="16_cuisineVRayCompleteMap.jpg";if(e)switch(e.name){case"Black Quartz":i="bar_dessus_black.jpg",n="cuisine_black.jpg";break;case"Paper Composite":n="cuisine_paper.jpg";break;case"Bamboo":i="bar_dessus_bamboo.jpg";break;case"Cement and Fly Ash":i="bar_dessus_cement.jpg",n="cuisine_cement.jpg";break;default:i="",n=""}t.image=i,a.image=n}},handleWindowCoatingChange:{value:function(e){e=1-e/2400;var t=this.templateObjects.backgroundMaterial;t.filterColor=[e,1,e,1]}},handleCurrentPanelChange:{value:function(e){var t=this.templateObjects.roomView,a=this.templateObjects.rideViewpoint,i=this._rideViewpoints,n=i.has(t.viewPoint.id),o=!1;if(e){var s=this._panelKeyViewpointMap.get(e.panelKey);s?(this._autoActivateRideTimeout&&(clearTimeout(this._autoActivateRideTimeout),this._autoActivateRideTimeout=null),t.pause(),t.viewPoint=s):o=!0}else o=!0;o&&(n||(t.viewPoint=a),t.play())}},play:{value:function(){this.templateObjects&&this.templateObjects.roomView&&this.templateObjects.roomView.play()}},pause:{value:function(){this.templateObjects&&this.templateObjects.roomView&&this.templateObjects.roomView.pause()}}});